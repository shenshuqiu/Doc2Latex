# 输入文件格式说明

本文档说明 Doc2LaTeX 工具的输入文件格式和组织结构。

## 目录结构

```
data/input/
├── 锻炼手册/           # 锻炼相关手册
│   ├── *.docx         # Word文档文件
│   ├── *.jpg/*.png    # 图片文件
│   └── cover.pdf      # 封面文件
├── 急救手册/           # 急救相关手册
│   ├── *.docx         # Word文档文件
│   ├── *.jpg/*.png    # 图片文件
│   └── cover.pdf      # 封面文件
└── 食物手册/           # 食物/营养相关手册
    ├── *.docx         # Word文档文件
    ├── *.jpg/*.png    # 图片文件
    └── cover.pdf      # 封面文件
```

## 文件命名规范

### DocX 文件命名
采用层级编号系统：`章节-小节-子节.docx`

**示例：**
- `1-0-0.docx` - 第1章概述
- `1-1-0.docx` - 第1章第1节
- `1-1-1.docx` - 第1章第1节第1小节
- `2-3-2.docx` - 第2章第3节第2小节

**编号说明：**
- 第一位数字：章节编号
- 第二位数字：小节编号（0表示章节概述）
- 第三位数字：子节编号（0表示小节概述）

**重要：章节编号自动重新映射**
- 无论原始文件使用什么章节编号，处理时都会自动重新映射为从第1章开始
- 例如：`锻炼手册`原本是第6-11章，会自动重新映射为第1-6章
- 例如：`食物手册`原本是第12-14章，会自动重新映射为第1-3章
- 例如：`急救手册`原本是第1-5章，保持为第1-5章
- 这确保每个手册在生成的LaTeX中都从第1章开始

### 图片文件命名
- 支持 `.jpg`, `.png`, `.jpeg` 格式
- 文件名应简洁明了，便于在文档中引用
- 避免使用特殊字符和空格

### 封面文件
- 每个手册文件夹必须包含 `cover.pdf` 作为封面

## 手册分类

### 1. 锻炼手册
- **原始章节范围：** 第6-11章（自动重新映射为第1-6章）
- **主题：** 身体锻炼、康复训练、运动指导
- **特殊内容：** 包含大量动作示范图片

### 2. 急救手册
- **原始章节范围：** 第1-5章（保持为第1-5章）
- **主题：** 急救知识、紧急处理、医疗指导
- **特殊内容：** 包含急救步骤图示和医疗器械使用说明

### 3. 食物手册
- **原始章节范围：** 第12-14章（自动重新映射为第1-3章）
- **主题：** 营养知识、饮食建议、健康饮食
- **特殊内容：** 包含营养成分表格和饮食建议图表

## 常见问题和解决方案

### DocX 文件可能出现的问题

1. **编码问题**
   - **现象：** 中文字符显示乱码
   - **解决：** 确保文件使用UTF-8编码保存
   - **检查：** 用文本编辑器打开文档检查字符显示

2. **格式不一致**
   - **现象：** 标题格式、字体大小不统一
   - **解决：** 使用Word样式统一格式
   - **建议：** 建立模板文档规范格式

3. **图片引用错误** 
   - **现象：** 文档中图片无法显示或路径错误
   - **解决：** 检查图片文件名与文档中引用是否一致
   - **注意：** 图片文件名大小写敏感

4. **章节编号错误**
   - **现象：** 文件名编号与内容不匹配
   - **解决：** 重新核对并修正文件名
   - **工具：** 可使用批量重命名工具

5. **特殊字符问题**
   - **现象：** 包含LaTeX特殊字符导致编译错误
   - **解决：** 转义特殊字符或使用转换函数
   - **常见：** `&`, `%`, `$`, `#`, `_`, `{`, `}`

6. **语法标记错误**
   - **现象：** 出现"XXX语法未定义"错误
   - **解决：** 检查语法标记是否正确
   - **支持的语法：**
     - `【小标题】`、`【小标题：标题内容】`
     - `【小小标题】`、`【小小标题：标题内容】`
     - `【图片：图片名称】`
     - `【名词解释：名称】`、`【操作步骤：名称】`
     - `【实用建议：名称】`、`【编者的话：名称】`、`【就医建议：名称】`
     - `【无序】`、`【有序】`等列表标记
   - **常见错误：** `【小标退】`（应为`【小标题】`）

### 图片文件问题

1. **文件格式不支持**
   - **支持格式：** JPG, PNG, JPEG
   - **不支持：** GIF, BMP, TIFF
   - **解决：** 转换为支持的格式

2. **文件过大**
   - **现象：** 编译时间过长或内存不足
   - **建议：** 压缩图片到合适大小（建议<2MB）

3. **文件名包含中文**
   - **问题：** LaTeX可能无法正确处理中文文件名
   - **建议：** 重命名为英文或拼音

### 目录结构问题

1. **缺少必要文件**
   - **检查：** 确保每个手册都有cover.pdf
   - **检查：** 确保所有引用的图片文件存在

2. **文件夹命名**
   - **标准：** 使用"锻炼手册"、"急救手册"、"食物手册"
   - **避免：** 额外的空格或特殊字符

## 使用建议

1. **文件组织**
   - 保持文件夹结构的一致性
   - 定期备份重要文档
   - 使用版本控制管理变更

2. **质量检查**
   - 处理前检查所有文件完整性
   - 验证图片文件可以正常打开
   - 确认文档内容与文件名匹配

3. **性能优化**
   - 压缩大图片文件
   - 删除不必要的临时文件
   - 定期清理输出目录

## Git 忽略说明

输入文件不应被提交到Git仓库，但需要保持目录结构：

```gitignore
# 忽略输入文件内容，保留目录结构
data/input/*/
!data/input/*/.gitkeep
```

建议在每个手册文件夹中放置 `.gitkeep` 文件以保持目录结构。